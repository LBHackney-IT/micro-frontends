(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{161:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/mfe1-245efe267c1935d07e216e53d62e130d.png"},162:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/mfe2-648ad8e4f682a2248a2239405a7dd86a.png"},163:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/mfe3-6d306bef91c222406e3f7999e8ecd9af.png"},164:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/mfe4-47cf53aac0ecbf956530acca8c2052da.png"},84:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(3),o=n(7),a=(n(0),n(89)),i=["components"],s={id:"testing",title:"Testing"},c={unversionedId:"testing",id:"testing",isDocsHomePage:!1,title:"Testing",description:"Micro frontend quality gates",source:"@site/docs/testing.md",slug:"/testing",permalink:"/micro-frontends/testing",editUrl:"https://github.com/LBHackney-IT/micro-frontends/edit/master/docs/testing.md",version:"current",sidebar:"docs",previous:{title:"BoilerPlate",permalink:"/micro-frontends/boilerplate"},next:{title:"Source Code Management",permalink:"/micro-frontends/source_code_management"}},l=[{value:"Micro frontend quality gates",id:"micro-frontend-quality-gates",children:[]}],u={toc:l};function p(e){var t=e.components,s=Object(o.a)(e,i);return Object(a.b)("wrapper",Object(r.a)({},u,s,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"micro-frontend-quality-gates"},"Micro frontend quality gates"),Object(a.b)("p",null,"We use a recurring pipeline \u2018pattern\u2019 to trigger the deployment and testing of the micro front ends.\nEach independent micro front end targets a single repository that contains a suite of end-to-end tests."),Object(a.b)("p",null,"Once a micro front end has been deployed to its first environment (development), it triggers the end-to-end tests which target the same environment that was deployed (this can be either the entire suite of tests or a subset as desired), once these tests have ran, then it will trigger the \u2018parent\u2019 mfe pipeline again."),Object(a.b)("p",null,"If the tests fail then it will halt deployment and roll back the changes. If all tests pass then the parent pipeline will deploy to the next environment (staging) and the deployment and testing cycle continues until either a failure occurs or the application is deployed and tested in production."),Object(a.b)("p",null,Object(a.b)("img",{alt:"MFE",src:n(161).default})),Object(a.b)("p",null,"On the mfe side, there is some boilerplate code within the CircleCI config.yml file that makes an API call to the e2e pipeline\n",Object(a.b)("img",{alt:"MFE",src:n(162).default})),Object(a.b)("p",null,"Similarly, here is the response from the e2e tests if a successful workflow occurs\n",Object(a.b)("img",{alt:"MFE",src:n(163).default})),Object(a.b)("p",null,"The notion of having a single repo that holds all of the system tests is to enable complete user journeys that span across multiple micro frontends. They are not designed to work in lieu of component and integration tests that each micro frontend should be providing, but rather offer coverage that compliments these tests, as well as extending them to providing actual \u2018real-world\u2019 journeys that the end users would perform."),Object(a.b)("p",null,"It\u2019s important to note that a more \u2018robust\u2019 approach to this sort of test automation would be the ability to run the tests without any deployments being made to a physical environment. As it currently stands, the e2e tests are beholden to the state of the environments being actively maintained and so may result in situations whereby a mfe pipeline becomes blocked due to issues unrelated to the code changes made to the mfe if the target environment isn\u2019t in a fully working state. We acknowledge that creating an ephemeral environment for the entire MMH application would present a considerable challenge and consume a lot of development time however."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"}," Diagram of MMH MFE test flow ")),Object(a.b)("p",null,Object(a.b)("img",{alt:"MFE",src:n(164).default})))}p.isMDXComponent=!0},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},f=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(n),f=r,m=p["".concat(i,".").concat(f)]||p[f]||d[f]||a;return n?o.a.createElement(m,s(s({ref:t},l),{},{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}f.displayName="MDXCreateElement"}}]);